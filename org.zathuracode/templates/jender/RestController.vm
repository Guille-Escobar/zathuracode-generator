package com.rest.controllers;

import com.dto.mapper.I${metaData.getRealClassName()}Mapper;
import java.util.List;

import javax.faces.bean.ManagedProperty;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import com.presentation.businessDelegate.IBusinessDelegatorView;
import ${package}.*;
import ${package}.dto.${metaData.getRealClassName()}DTO;

@RestController
@RequestMapping("/${metaData.getRealClassName()}")
public class ${metaData.getRealClassName()}RestController {

	private static final Logger log = LoggerFactory.getLogger(${metaData.getRealClassName()}RestController.class);

	@ManagedProperty(value = "#{BusinessDelegatorView}")
    private IBusinessDelegatorView businessDelegatorView;
  
  	@Autowired
	private I${metaData.getRealClassName()}Mapper ${metaData.getRealClassNameAsVariable()}Mapper;
     
    @PutMapping
    @RequestMapping(value = "/save${metaData.getRealClassName()}/{${metaData.getRealClassNameAsVariable()}DTO}")
    public void save${metaData.getRealClassName()}(@PathVariable("${metaData.getRealClassNameAsVariable()}DTO") ${metaData.getRealClassName()}DTO entity, ModelMap modelMap) throws Exception {
    	try {
    		${metaData.getRealClassName()} ${metaData.getRealClassNameAsVariable()} = ${metaData.getRealClassNameAsVariable()}Mapper.${metaData.getRealClassNameAsVariable()}DTOTo${metaData.getRealClassName()}(entity);
    		
    		businessDelegatorView.save${metaData.getRealClassName()}(${metaData.getRealClassNameAsVariable()});
    	} catch (Exception e) {
    		log.error(e.getMessage(), e);
    	}
    }
    
    @DeleteMapping
    @RequestMapping(value = "/delete${metaData.getRealClassName()}/{${metaData.getRealClassNameAsVariable()}DTO}")
    public void delete${metaData.getRealClassName()}(@PathVariable("${metaData.getRealClassNameAsVariable()}DTO") ${metaData.getRealClassName()}DTO entity, ModelMap modelMap) throws Exception {
    	try {
    		${metaData.getRealClassName()} ${metaData.getRealClassNameAsVariable()} = ${metaData.getRealClassNameAsVariable()}Mapper.${metaData.getRealClassNameAsVariable()}DTOTo${metaData.getRealClassName()}(entity);
    		
    		businessDelegatorView.delete${metaData.getRealClassName()}(${metaData.getRealClassNameAsVariable()});
    	} catch (Exception e) {
    		log.error(e.getMessage(), e);
    	}
    }
     
    @PutMapping   
    @RequestMapping(value = "/update${metaData.getRealClassName()}/{${metaData.getRealClassNameAsVariable()}DTO}")
    public void update${metaData.getRealClassName()}(@PathVariable("${metaData.getRealClassNameAsVariable()}DTO") ${metaData.getRealClassName()}DTO entity, ModelMap modelMap) throws Exception {
    	try {
    		${metaData.getRealClassName()} ${metaData.getRealClassNameAsVariable()} = ${metaData.getRealClassNameAsVariable()}Mapper.${metaData.getRealClassNameAsVariable()}DTOTo${metaData.getRealClassName()}(entity);
    		
    		businessDelegatorView.update${metaData.getRealClassName()}(${metaData.getRealClassNameAsVariable()});
    	} catch (Exception e) {
    		log.error(e.getMessage(), e);
    	}
    }
    
    @PostMapping
    @RequestMapping(value = "/getData${metaData.getRealClassName()}")
    public List<${metaData.getRealClassName()}DTO> getData${metaData.getRealClassName()}(ModelMap modelMap) throws Exception {
		try {
			return businessDelegatorView.getData${metaData.getRealClassName()}();
		} catch (Exception e) {
			log.error(e.getMessage(), e);
		}
		return null;
    }
    
    @GetMapping
    @RequestMapping(value = "/get${metaData.getRealClassName()}/{cliId}")
    public ${metaData.getRealClassName()}DTO get${metaData.getRealClassName()}(@PathVariable("cliId") ${metaData.primaryKey.getRealClassName()} ${metaData.primaryKey.getShowName()}, ModelMap modelMap) throws Exception {
    	try {
    		${metaData.getRealClassName()} ${metaData.getRealClassNameAsVariable()} = businessDelegatorView.get${metaData.getRealClassName()}(${metaData.primaryKey.getShowName()});
						
			return ${metaData.getRealClassNameAsVariable()}Mapper.${metaData.getRealClassNameAsVariable()}To${metaData.getRealClassName()}DTO(${metaData.getRealClassNameAsVariable()});
		} catch (Exception e) {
			log.error(e.getMessage(), e);
		}
		return null;
    }
        
    
} 